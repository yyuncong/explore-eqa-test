# General
seed: 77
exp_name: exp_ours_goatbench_0.0_0.1_4e-06_patch1_top10_coeff0.3_img12
output_parent_dir: /work/pi_chuangg_umass_edu/yuncong/results
scene_dataset_config_path: "data/hm3d_annotated_basis.scene_dataset_config.json"
scene_data_path_train: /project/pi_chuangg_umass_edu/yuncong/data_v2/scene_datasets/hm3d/
scene_data_path_val: /work/pi_chuangg_umass_edu/yuncong/data/scene_datasets/hm3d/
test_data_dir: /home/yuncongyang_umass_edu/scene_understanding/jiachen/explore-eqa-test/goat_bench/val_unseen/content/
#model_path: /work/pi_chuangg_umass_edu/yuncong/ds_lora/ds_cluster_scannet_4e-06_patch1_ds_rand_ego_lora
model_path: /work/pi_chuangg_umass_edu/yuncong/ds_lora/goatbench_4e-06_patch1_ds_rand_filter_top10_coeff0.3_ego5_lora_img12

concept_graph_config_path: "conceptgraph/hydra_configs"
concept_graph_config_name: "rerun_realtime_mapping"

visual_feature_size: 24
patch_size: 8
img_prompt_visual_feature_size: 24
img_prompt_patch_size: 4

choose_every_step: true
egocentric_views: true
action_memory: false
prefiltering: true
top_k_categories: 10

use_deepspeed: true #false

add_positional_encodings: false

# about detection model
yolo_model_name: /home/yuncongyang_umass_edu/scene_understanding/yanghan/explore-eqa-test/yolov8x-world-finetuned.pt  # yolov8x-world.pt
class_set: yolo_finetune  # hm3d, yolo_finetune, scannet200

# Camera, image
camera_height: 1.5
camera_tilt_deg: -30
img_width: 1280
img_height: 1280
hfov: 120
tsdf_grid_size: 0.1
margin_w_ratio: 0.25
margin_h_ratio: 0.6

# about goatbench evaluation
success_distance: 1.0

save_visualization: false
save_frontier_video: false

# Navigation
init_clearance: 0.3
max_step_room_size_ratio: 7
extra_view_phase_1: 4
extra_view_angle_deg_phase_1: 60
max_target_observation: 4

# Semantic map
explored_depth: 1.7
planner:
  unexplored_T: 2.0
  unoccupied_T: 2.0
  eps: 1
  max_dist_from_cur_phase_1: 1  # when the target object is not found, explore the frontiers with this step length
  max_dist_from_cur_phase_2: 1  # when the target object is found, go to the target object with this step length
  max_unexplored_check_frontier: 3
  max_unoccupied_check_frontier: 1
  final_observe_distance: 1.5  # in phase 2, find a place that is this far from the target object to observe it
  surrounding_explored_radius: 0.7

  # about frontier selection
  frontier_edge_area_min: 4
  frontier_edge_area_max: 6
  frontier_area_min: 8
  frontier_area_max: 9
  min_frontier_area: 20  # the frontier should have at least this many pixels
  max_frontier_angle_range_deg: 150  # the angle spanned by the pixels in a frontier should not be larger than this
  min_frontier_angle_diff_deg: 0  # the angle between two frontiers should be larger than this. otherwise, merge them
  region_equal_threshold: 0.95

scene_graph:
  confidence: 0.003
  nms_threshold: 0.1
  iou_threshold: 0.5
  obj_include_dist: 3.5
  target_obj_iou_threshold: 0.6